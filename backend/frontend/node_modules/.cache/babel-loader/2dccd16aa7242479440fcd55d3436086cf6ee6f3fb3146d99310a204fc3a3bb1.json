{"ast":null,"code":"import React,{useState,useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{useNavigate}from'react-router-dom';import{listOrders}from'../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrderListScreen(){const navigate=useNavigate();const dispatch=useDispatch();const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const orderList=useSelector(state=>state.orderList);const{loading,error,orders}=orderList;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listOrders());}else{navigate('/login');}},[dispatch,navigate]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Order List\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,responsive:true,bordered:true,hover:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Paid\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delivered\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.user&&order.user.name}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Paid on \",order.paidAt.substring(0,19)]}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-x\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Delivered on \",order.deliveredAt.substring(0,19)]}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-x\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/orders/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:\"Details\"})})})]},order._id))})]})]});}export default OrderListScreen;","map":{"version":3,"names":["React","useState","useEffect","LinkContainer","Table","Button","useDispatch","useSelector","Loader","Message","FormContainer","useNavigate","listOrders","jsx","_jsx","jsxs","_jsxs","OrderListScreen","navigate","dispatch","userLogin","state","userInfo","orderList","loading","error","orders","isAdmin","children","variant","striped","responsive","bordered","hover","className","map","order","_id","user","name","createdAt","substring","totalPrice","isPaid","paidAt","style","color","isDelivered","deliveredAt","to","concat"],"sources":["E:/Github/django_dewolster_V2/backend/frontend/src/screens/OrderListScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nimport { listOrders } from '../actions/orderActions'\r\n\r\n\r\nfunction OrderListScreen() {\r\n    \r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const orderList = useSelector(state => state.orderList)\r\n    const { loading, error, orders } = orderList\r\n    \r\n    useEffect(() => {\r\n        if(userInfo && userInfo.isAdmin){\r\n            dispatch(listOrders())\r\n        } else {\r\n            navigate('/login')\r\n        }\r\n\r\n    }, [dispatch, navigate])\r\n\r\n  return (\r\n    <div>\r\n      <h1>Order List</h1>\r\n      {loading ? (\r\n          <Loader />\r\n        ) : error ? (\r\n          <Message variant='danger'>{error}</Message>\r\n        ) : (\r\n          <Table striped responsive bordered hover className='table-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>User</th>\r\n                <th>Date</th>\r\n                <th>Total price</th>\r\n                <th>Paid</th>\r\n                <th>Delivered</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {orders.map(order => (\r\n                <tr key={order._id}>\r\n                  <td>{order._id}</td>\r\n                  <td>{order.user && order.user.name}</td>\r\n                  <td>{order.createdAt.substring(0, 10)}</td>\r\n                  <td>${order.totalPrice}</td>\r\n                  <td>{order.isPaid ? (\r\n                    <Message variant='success'>Paid on {order.paidAt.substring(0, 19)}</Message>\r\n                  ) : \r\n                  <i className='fas fa-x' style={{color:'red'}}></i>\r\n                  }</td>\r\n                  <td>{order.isDelivered ? (\r\n                    <Message variant='success'>Delivered on {order.deliveredAt.substring(0, 19)}</Message>\r\n                  ) : \r\n                  <i className='fas fa-x' style={{color:'red'}}></i>\r\n                  }</td>\r\n                  <td>\r\n                    <LinkContainer to={`/orders/${order._id}`}>\r\n                      <Button variant='light' className='btn-sm'>\r\n                        Details\r\n                      </Button>\r\n                    </LinkContainer>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OrderListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}