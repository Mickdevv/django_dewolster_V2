{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation,useParams,json}from'react-router-dom';import{Form,Row,Col,Button,check}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{USER_UPDATE_RESET}from'../constants/userConstants';import{getUserDetails,updateUser}from'../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserEditScreen(){const userId=useParams()['id'];//   console.log(JSON.stringify(userId))\nconst[name,setName]=useState('');const[email,setEmail]=useState('');const[isAdmin,setIsAdmin]=useState(false);const dispatch=useDispatch();const navigate=useNavigate();const userDetails=useSelector(state=>state.userDetails);const{error,loading,user}=userDetails;const userUpdate=useSelector(state=>state.userUpdate);const{error:errorUpdate,loading:loadingUpdate,success:successUpdate}=userUpdate;useEffect(()=>{if(successUpdate){dispatch({type:USER_UPDATE_RESET});navigate('/admin/userlist');}else{if(!user.name||user._id!==Number(userId)){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setIsAdmin(user.isAdmin);console.log(JSON.stringify(user));}}},[userId,user,successUpdate,navigate]);const submitHandler=e=>{e.preventDefault();dispatch(updateUser({_id:user._id,name,email,isAdmin}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/userlist\",children:\"Go Back\"}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit User\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{// required\ntype:\"name\",placeholder:\"Enter name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{// required\ntype:\"email\",placeholder:\"Enter email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"isadmin\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Admin\"}),/*#__PURE__*/_jsx(Form.Check,{// required\ntype:\"checkbox\",label:\"Is Admin\",checked:isAdmin,onChange:e=>setIsAdmin(e.target.checked)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]})]});}export default UserEditScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","useParams","json","Form","Row","Col","Button","check","useDispatch","useSelector","Loader","Message","FormContainer","USER_UPDATE_RESET","getUserDetails","updateUser","jsx","_jsx","jsxs","_jsxs","UserEditScreen","userId","name","setName","email","setEmail","isAdmin","setIsAdmin","dispatch","navigate","userDetails","state","error","loading","user","userUpdate","errorUpdate","loadingUpdate","success","successUpdate","type","_id","Number","console","log","JSON","stringify","submitHandler","e","preventDefault","children","to","variant","onSubmit","Group","controlId","className","Label","Control","placeholder","value","onChange","target","Check","label","checked"],"sources":["E:/Github/django_dewolster_V2/backend/frontend/src/screens/UserEditScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Link, useNavigate, useLocation, useParams, json } from 'react-router-dom'\r\nimport { Form, Row, Col, Button, check } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { USER_UPDATE_RESET } from '../constants/userConstants'\r\n\r\nimport { getUserDetails, updateUser } from '../actions/userActions'\r\n\r\nfunction UserEditScreen() {\r\n\r\n  const userId = useParams()['id']\r\n//   console.log(JSON.stringify(userId))\r\n\r\n  const [name, setName] = useState('')\r\n  const [email, setEmail] = useState('')\r\n  const [isAdmin, setIsAdmin] = useState(false)\r\n\r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate()\r\n\r\n  const userDetails = useSelector(state => state.userDetails)\r\n  const { error, loading, user } = userDetails\r\n  \r\n  const userUpdate = useSelector(state => state.userUpdate)\r\n  const { error: errorUpdate, loading: loadingUpdate, success: successUpdate } = userUpdate\r\n\r\n  useEffect(() => {\r\n    if(successUpdate){\r\n        dispatch({type: USER_UPDATE_RESET })\r\n        navigate('/admin/userlist')\r\n    } else {\r\n        if (!user.name || user._id !== Number(userId)){\r\n        dispatch(getUserDetails(userId))\r\n        }\r\n        else {\r\n            setName(user.name)\r\n            setEmail(user.email)\r\n            setIsAdmin(user.isAdmin)\r\n            console.log(JSON.stringify(user))\r\n        }\r\n    }\r\n    \r\n  }, [userId, user, successUpdate, navigate])\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n    dispatch(updateUser({_id:user._id, name, email, isAdmin}))\r\n  }\r\n    return (\r\n        <div>\r\n            <Link to='/admin/userlist'>Go Back</Link>\r\n            <FormContainer>\r\n                <h1>Edit User</h1>\r\n                {loadingUpdate && <Loader/>}\r\n                {errorUpdate && <Message variant='danger'>{errorUpdate}</Message>}\r\n\r\n                {loading ? <Loader /> : error ? <Message variant='danger'>{error}</Message> \r\n                : (\r\n                    <Form onSubmit={submitHandler}>\r\n                    <Form.Group controlId='name' className='mb-3'>\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control \r\n                            // required\r\n                            type='name' \r\n                            placeholder='Enter name' \r\n                            value={name} \r\n                            onChange={(e) => setName(e.target.value)}>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='email' className='mb-3'>\r\n                        <Form.Label>Email Address</Form.Label>\r\n                        <Form.Control \r\n                        // required\r\n                        type='email' \r\n                        placeholder='Enter email' \r\n                        value={email} \r\n                        onChange={(e) => setEmail(e.target.value)}>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n                    \r\n                    <Form.Group controlId='isadmin' className='mb-3'>\r\n                        <Form.Label>Admin</Form.Label>\r\n                        <Form.Check \r\n                            // required\r\n                            type='checkbox' \r\n                            label='Is Admin'\r\n                            checked={isAdmin}\r\n                            onChange={(e) => setIsAdmin(e.target.checked)}>\r\n                        </Form.Check>\r\n                    </Form.Group>\r\n            \r\n                    <Button type='submit' variant='primary'>Update</Button>\r\n                    </Form>\r\n                )}\r\n            </FormContainer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserEditScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}