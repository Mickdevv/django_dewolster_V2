{"ast":null,"code":"import React,{useState,useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{useNavigate}from'react-router-dom';import{deleteUser,listUsers}from'../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserListScreen(){const navigate=useNavigate();const dispatch=useDispatch();const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const userList=useSelector(state=>state.userList);const{loading,error,users}=userList;const userDelete=useSelector(state=>state.userDelete);const{success:successDelete}=userDelete;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{navigate('/login');}},[dispatch,navigate,successDelete]);const deleteHandler=id=>{if(window.confirm('Are you sure you want to delete this user?')){dispatch(deleteUser(id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"UserList\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,responsive:true,bordered:true,hover:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Admin\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-x\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},user._id))})]})]});}export default UserListScreen;","map":{"version":3,"names":["React","useState","useEffect","LinkContainer","Table","Button","useDispatch","useSelector","Loader","Message","FormContainer","useNavigate","deleteUser","listUsers","jsx","_jsx","jsxs","_jsxs","UserListScreen","navigate","dispatch","userLogin","state","userInfo","userList","loading","error","users","userDelete","success","successDelete","isAdmin","deleteHandler","id","window","confirm","children","variant","striped","responsive","bordered","hover","className","map","user","_id","name","email","style","color","to","concat","onClick"],"sources":["E:/Github/django_dewolster_V2/backend/frontend/src/screens/UserListScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nimport { deleteUser, listUsers } from '../actions/userActions'\r\n\r\n\r\nfunction UserListScreen() {\r\n    \r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userList = useSelector(state => state.userList)\r\n    const { loading, error, users } = userList\r\n\r\n    const userDelete = useSelector(state => state.userDelete)\r\n    const { success: successDelete } = userDelete\r\n    \r\n    useEffect(() => {\r\n        if(userInfo && userInfo.isAdmin){\r\n            dispatch(listUsers())\r\n        } else {\r\n            navigate('/login')\r\n        }\r\n\r\n    }, [dispatch, navigate, successDelete])\r\n\r\n    const deleteHandler = (id) => {\r\n        if (window.confirm('Are you sure you want to delete this user?')){\r\n            dispatch(deleteUser(id))\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div>\r\n      <h1>UserList</h1>\r\n      {loading ? (\r\n          <Loader />\r\n        ) : error ? (\r\n          <Message variant='danger'>{error}</Message>\r\n        ) : (\r\n          <Table striped responsive bordered hover className='table-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>Name</th>\r\n                <th>Email address</th>\r\n                <th>Admin</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {users.map(user => (\r\n                <tr key={user._id}>\r\n                  <td>{user._id}</td>\r\n                  <td>{user.name}</td>\r\n                  <td>{user.email}</td>\r\n                  <td>{user.isAdmin ? (\r\n                    <i className='fas fa-check' style={{color:'green'}}></i>\r\n                  ) : \r\n                  <i className='fas fa-x' style={{color:'red'}}></i>\r\n                  }</td>\r\n                  {/* <td>${user.totalPrice}</td> */}\r\n                  <td>\r\n                    <LinkContainer to={`/admin/user/${user._id}/edit`}>\r\n                      <Button variant='light' className='btn-sm'>\r\n                        <i className='fas fa-edit'></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(user._id)}>\r\n                        <i className='fas fa-trash'></i>\r\n                      </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}