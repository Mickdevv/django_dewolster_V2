{"ast":null,"code":"import React,{useState,useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{useNavigate}from'react-router-dom';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductListScreen(){const navigate=useNavigate();const dispatch=useDispatch();const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const productList=useSelector(state=>state.productList);const{loading,error,products}=productList;const productDelete=useSelector(state=>state.productDelete);const{loading:loadingDelete,error:errorDelete,success:successDelete}=productDelete;const productCreate=useSelector(state=>state.productCreate);const{loading:loadingCreate,error:errorCreate,success:successCreate,product:createdProduct}=productCreate;useEffect(()=>{dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){navigate('/login');}if(successCreate){console.log(JSON.stringify(createdProduct));navigate(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts());}},[dispatch,navigate,userInfo,successDelete,successCreate,createdProduct]);const deleteProductHandler=id=>{console.log('Delete product');if(window.confirm('Are you sure you want to delete this product?')){dispatch(deleteProduct(id));// console.log('Delete product')\n}};const createProductHandler=()=>{dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"alin-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsx(Button,{className:\"my-3\",onClick:createProductHandler,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\",children:\" Create product\"})})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),/*#__PURE__*/_jsx(\"h1\",{children:\"Product List\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,responsive:true,bordered:true,hover:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"alin-items-center\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Brand\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Stock\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Review\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"alin-items-center\",children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsx(\"td\",{children:product.countInStock>0?product.countInStock:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-x\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:product.review}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteProductHandler(product._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id))})]})]});}export default ProductListScreen;","map":{"version":3,"names":["React","useState","useEffect","LinkContainer","Table","Button","Row","Col","useDispatch","useSelector","Loader","Message","FormContainer","useNavigate","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","ProductListScreen","navigate","dispatch","userLogin","state","userInfo","productList","loading","error","products","productDelete","loadingDelete","errorDelete","success","successDelete","productCreate","loadingCreate","errorCreate","successCreate","product","createdProduct","type","isAdmin","console","log","JSON","stringify","concat","_id","deleteProductHandler","id","window","confirm","createProductHandler","children","className","onClick","variant","striped","responsive","bordered","hover","map","name","price","category","brand","countInStock","style","color","review","to"],"sources":["E:/Github/django_dewolster_V2/backend/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button, Row, Col } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions'\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\r\n\r\n\r\nfunction ProductListScreen() {\r\n    \r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const productList = useSelector(state => state.productList)\r\n    const { loading, error, products } = productList\r\n\r\n    const productDelete = useSelector(state => state.productDelete)\r\n    const { loading:loadingDelete, error:errorDelete, success:successDelete } = productDelete\r\n\r\n    const productCreate = useSelector(state => state.productCreate)\r\n    const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct } = productCreate\r\n    \r\n    useEffect(() => {\r\n        dispatch({ type: PRODUCT_CREATE_RESET })\r\n        if(!userInfo.isAdmin){\r\n            navigate('/login')\r\n        } \r\n        if (successCreate) {\r\n            console.log(JSON.stringify(createdProduct))\r\n            navigate(`/admin/product/${createdProduct._id}/edit`)\r\n        }else {\r\n            dispatch(listProducts())\r\n        }\r\n        \r\n        \r\n    }, [dispatch, navigate, userInfo, successDelete, successCreate, createdProduct])\r\n\r\n    const deleteProductHandler = (id) => {\r\n        console.log('Delete product')\r\n        if (window.confirm('Are you sure you want to delete this product?')){\r\n            dispatch(deleteProduct(id))\r\n            // console.log('Delete product')\r\n        }\r\n    }\r\n\r\n    const createProductHandler = () => {\r\n        dispatch(createProduct())\r\n    }\r\n\r\n  return (\r\n    <div>\r\n        <Row className='alin-items-center'>\r\n            <Col><h1>Products</h1></Col>\r\n            <Col className='text-right'>\r\n                <Button className='my-3' onClick={createProductHandler}>\r\n                    <i className='fas fa-plus'> Create product</i>\r\n                </Button>\r\n            </Col>\r\n        </Row>\r\n\r\n        {loadingDelete && <Loader />}\r\n        {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n\r\n        {loadingCreate && <Loader />}\r\n        {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n      <h1>Product List</h1>\r\n      {loading ? (\r\n          <Loader />\r\n        ) : error ? (\r\n          <Message variant='danger'>{error}</Message>\r\n        ) : (\r\n          <Table striped responsive bordered hover className='table-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th className='alin-items-center'>ID</th>\r\n                <th>Name</th>\r\n                <th>Price</th>\r\n                <th>Category</th>\r\n                <th>Brand</th>\r\n                <th>Stock</th>\r\n                <th>Review</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {products.map(product => (\r\n                <tr key={product._id}>\r\n                  <td className='alin-items-center'>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>${product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>{product.countInStock > 0 ? (\r\n                    product.countInStock\r\n                  ) : \r\n                  <i className='fas fa-x' style={{color:'red'}}></i>\r\n                  }</td>\r\n                  <td>{product.review}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                      <Button variant='light' className='btn-sm'>\r\n                        <i className='fas fa-edit'></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button variant='danger' className='btn-sm' onClick={() => deleteProductHandler(product._id)}>\r\n                        <i className='fas fa-trash'></i>\r\n                      </Button>\r\n                  </td>\r\n                  \r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}